<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stok Barang - Inline Editing</title>
    <link rel="daftarbarang.css" href="styles.css">
</head>
<body>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Cari barang..."/>
    </div>
    <h2>Bahan Kue</h2>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>No</th><th>Kode Barang</th><th>Nama Barang</th><th>Kategori</th>
                    <th>Stok</th><th>Harga</th><th>Tanggal Masuk</th><th>Tanggal Keluar</th><th>Tanggal Expired</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td><td contenteditable="true"></td><td contenteditable="true"></td><td>Bahan Kue</td>
                    <td contenteditable="true">200</td><td contenteditable="true">Rp 12,000</td>
                    <td contenteditable="true">2024-12-01</td><td contenteditable="true">2024-12-10</td>
                    <td contenteditable="true">2025-06-01</td>
                </tr>
                <tr>
                    <td>2</td><td contenteditable="true"></td><td contenteditable="true"></td><td>Bahan Kue</td>
                    <td contenteditable="true">150</td><td contenteditable="true">Rp 15,000</td>
                    <td contenteditable="true">2024-12-03</td><td contenteditable="true">2024-12-12</td>
                    <td contenteditable="true">2025-03-15</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="floating-menu">
        <button class="soft-button">Ambil Barang</button>
        <div class="floating-button">✖️</div>
        <button class="soft-button">Riwayat Brg_</button>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Memuat data dari file JSON eksternal
            function loadData() {
                fetch('kue.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(jsonData => {
                        const rows = document.querySelectorAll("table tbody tr");
                        rows.forEach((row, index) => {
                            const kodeCell = row.cells[1]; // Kode Barang
                            const namaCell = row.cells[2]; // Nama Barang
                            if (jsonData[index]) {
                                kodeCell.textContent = jsonData[index].kode || "N/A";
                                namaCell.textContent = jsonData[index].nama || "N/A";
                            }
                        });
                    })
                    .catch(error => console.error('Error loading JSON:', error));
            }

            // Fungsi pencarian tabel
            function searchTable() {
                const input = document.getElementById("searchInput").value.toLowerCase();
                document.querySelectorAll("table tbody tr").forEach(row => {
                    const isVisible = Array.from(row.cells).some(cell =>
                        cell.textContent.toLowerCase().includes(input)
                    );
                    row.style.display = isVisible ? "" : "none";
                });
            }

            // Toggle tombol pada floating button
            const floatingButton = document.querySelector(".floating-button");
            const softButtons = document.querySelectorAll(".soft-button");
            floatingButton.addEventListener("click", () => {
                softButtons.forEach(button => button.classList.toggle("visible"));
            });

            // Tambahkan animasi rotasi pada klik tombol
            floatingButton.addEventListener("click", () => {
                floatingButton.classList.add("rotate");
                setTimeout(() => {
                    floatingButton.classList.remove("rotate");
                }, 500); // Durasi animasi sama dengan di CSS
            });

            // Event pencarian
            document.getElementById("searchInput").addEventListener("keyup", searchTable);

            // Memuat data tabel
            loadData();
        });
    </script>
</body>
</html>